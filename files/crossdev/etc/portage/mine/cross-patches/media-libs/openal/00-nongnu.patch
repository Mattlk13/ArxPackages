diff --git a/openal-soft-1.16.0.old/CMakeLists.txt b/openal-soft-1.16.0/CMakeLists.txt
index 0087edb..a84043b 100644
--- a/openal-soft-1.16.0.old/CMakeLists.txt
+++ b/openal-soft-1.16.0/CMakeLists.txt
@@ -62,8 +62,10 @@ ELSE()
     SET(LIBNAME openal)
 
     # These are needed on non-Windows systems for extra features
-    ADD_DEFINITIONS(-D_GNU_SOURCE=1 -D_POSIX_C_SOURCE=200809L -D_XOPEN_SOURCE=700)
-    SET(CMAKE_REQUIRED_FLAGS "${CMAKE_REQUIRED_FLAGS} -D_GNU_SOURCE=1 -D_POSIX_C_SOURCE=200809L -D_XOPEN_SOURCE=700")
+    if(${CMAKE_SYSTEM_NAME} MATCHES "Linux" OR ${CMAKE_SYSTEM_NAME} MATCHES "GNU" OR ${CMAKE_SYSTEM_NAME} MATCHES "kFreeBSD")
+        ADD_DEFINITIONS(-D_GNU_SOURCE=1 -D_POSIX_C_SOURCE=200809L -D_XOPEN_SOURCE=700)
+        SET(CMAKE_REQUIRED_FLAGS "${CMAKE_REQUIRED_FLAGS} -D_GNU_SOURCE=1 -D_POSIX_C_SOURCE=200809L -D_XOPEN_SOURCE=700")
+    endif()
 ENDIF()
 
 # Set defines for large file support
@@ -515,7 +517,7 @@ IF(NOT HAVE_WINDOWS_H)
 
     CHECK_SYMBOL_EXISTS(pthread_setname_np pthread.h HAVE_PTHREAD_SETNAME_NP)
     IF(NOT HAVE_PTHREAD_SETNAME_NP)
-        CHECK_SYMBOL_EXISTS(pthread_set_name_np pthread.h HAVE_PTHREAD_SET_NAME_NP)
+        CHECK_SYMBOL_EXISTS(pthread_set_name_np pthread_np.h HAVE_PTHREAD_SET_NAME_NP)
     ENDIF()
     IF(HAVE_PTHREAD_NP_H)
         CHECK_SYMBOL_EXISTS(pthread_mutexattr_setkind_np "pthread.h;pthread_np.h" HAVE_PTHREAD_MUTEXATTR_SETKIND_NP)
